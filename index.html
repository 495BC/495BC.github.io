<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Player Stats Page</title>
  <!-- IBM Plex Sans font -->
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Basic Reset & Body */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'IBM Plex Sans', sans-serif;
      background: #111;
      color: #fff;
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
      position: relative;
    }
    /* Custom Scrollbar Styles (WebKit) */
    ::-webkit-scrollbar {
      width: 12px;
    }
    ::-webkit-scrollbar-track {
      background: #222;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #888;
      border-radius: 6px;
      border: 3px solid #222;
    }
    ::-webkit-scrollbar-thumb:hover {
      background-color: #aaa;
    }
    /* Firefox custom scrollbar */
    html {
      scrollbar-width: thin;
      scrollbar-color: #888 #222;
    }
    /* Background container that sits behind everything */
    #bg-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background-size: cover;
      background-position: center;
      transition: opacity 0.5s ease, background-position 0.5s ease-out;
      opacity: 1;
    }
    /* MAIN TITLE */
    .main-title {
      background-color: #000;
      text-align: center;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .main-title h1 {
      font-size: 2rem;
      color: #fff;
    }
    /* NAV BAR */
    .nav-bar {
      background-color: rgba(128,128,128,0.4);
      padding: 1rem;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      margin-left: 10px;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    /************************************************
     * NEON BUTTON STYLES WITH CUSTOM COLORS
     ************************************************/
    .category-buttons {
      display: flex;
      gap: 1rem;
    }
    .category-buttons a {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      text-transform: uppercase;
      transition: 0.5s;
      letter-spacing: 4px;
      font-weight: bold;
      font-size: 1rem;
      border: 2px solid;
      border-color: var(--button-neon);
      height: 60px;
      aspect-ratio: 3 / 1;
    }
    .category-buttons a.qb {
      color: #8A2BE2;
      --button-neon: #8A2BE2;
    }
    .category-buttons a.wr {
      color: #03e9f4;
      --button-neon: #03e9f4;
    }
    .category-buttons a.db {
      color: #8B0000;
      --button-neon: #8B0000;
    }
    .category-buttons a.de {
      color: #FFA500;
      --button-neon: #FFA500;
    }
    .category-buttons a:hover {
      background: var(--button-neon);
      color: #fff;
      box-shadow: 0 0 5px var(--button-neon),
                  0 0 25px var(--button-neon),
                  0 0 50px var(--button-neon),
                  0 0 200px var(--button-neon);
      -webkit-box-reflect: below 1px linear-gradient(transparent, #0005);
    }
    /***********************************************
     * STAT PAGE SECTIONS
     ***********************************************/
    section {
      display: none;
      background-color: rgba(34,34,34,0.85);
      margin: 1rem auto;
      padding: 1rem;
      border-radius: 4px;
      max-width: 90%;
      transform: translateX(-50px);
      opacity: 0;
    }
    section h2 {
      margin-bottom: 1rem;
      color: #fff;
    }
    /* Container for the table */
    .list-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .heading-row {
      display: flex;
      background: rgba(0,0,0,0.7);
      padding: 10px;
      border-radius: 5px;
      font-weight: bold;
    }
    .heading-cell {
      flex: 1;
      text-align: left;
      padding: 0 10px;
    }
    .heading-cell.rank-cell {
      width: 60px;
      flex-shrink: 0;
    }
    .player-row {
      display: flex;
      align-items: center;
      background: rgba(0,0,0,0.5);
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.5);
      transform: translateX(-50px);
      opacity: 0;
    }
    .player-rank {
      width: 60px;
      flex-shrink: 0;
      text-align: center;
      font-weight: bold;
      margin-right: 10px;
      padding: 10px;
      border-radius: 5px;
      background: #000;
    }
    .top1 { border: 2px solid gold; }
    .top2 { border: 2px solid silver; }
    .top3 { border: 2px solid #cd7f32; }
    .other { border: 2px solid #444; }
    .player-cell {
      flex: 1;
      padding: 10px;
      background: rgba(0,0,0,0.7);
      border-radius: 5px;
      margin-right: 5px;
    }
    /* ---------------- Animation Classes ---------------- */
    .fade-in-left {
      animation: fadeInLeft 0.5s ease forwards;
    }
    .fade-out-left {
      animation: fadeOutLeft 0.5s ease forwards;
    }
    @keyframes fadeInLeft {
      0% { opacity: 0; transform: translateX(-50px); }
      100% { opacity: 1; transform: translateX(0); }
    }
    @keyframes fadeOutLeft {
      0% { opacity: 1; transform: translateX(0); }
      100% { opacity: 0; transform: translateX(-50px); }
    }
  </style>
  <!-- Papa Parse via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
</head>
<body>
  <!-- Background container -->
  <div id="bg-container"></div>
  
  <!-- MAIN TITLE -->
  <div class="main-title">
    <h1>Raider TC Stats</h1>
  </div>
  <!-- NAV BAR -->
  <div class="nav-bar">
    <div class="category-buttons">
      <a href="#" onclick="switchSection('qb-section')" class="qb">QB</a>
      <a href="#" onclick="switchSection('wr-section')" class="wr">WR</a>
      <a href="#" onclick="switchSection('db-section')" class="db">DB</a>
      <a href="#" onclick="switchSection('de-section')" class="de">DE</a>
    </div>
  </div>
  <!-- QB SECTION -->
  <section id="qb-section">
    <h2>Quarterback Stats</h2>
    <div class="list-container" id="qb-container"></div>
  </section>
  <!-- WR SECTION -->
  <section id="wr-section">
    <h2>Wide Receiver Stats</h2>
    <div class="list-container" id="wr-container"></div>
  </section>
  <!-- DB SECTION -->
  <section id="db-section">
    <h2>Defensive Back Stats</h2>
    <div class="list-container" id="db-container"></div>
  </section>
  <!-- DE SECTION -->
  <section id="de-section">
    <h2>Defensive End Stats</h2>
    <div class="list-container" id="de-container"></div>
  </section>
  <script>
    // Background images for each stat page (unchanged)
    const bgImages = {
      "qb-section": "https://wallpaperaccess.com/full/1840637.jpg",
      "wr-section": "https://th.bing.com/th/id/R.8909fe74557eb4929c769af4e6cccab5?rik=fWIZE6jl4EAu%2bw&riu=http%3a%2f%2fwallpapercave.com%2fwp%2fwp1827787.jpg&ehk=8%2fXDqhGB%2fd3yisEHY%2fPuoUF7U9FFQh6k1HRaR20%2bClU%3d&risl=&pid=ImgRaw&r=0",
      "db-section": "https://wallpapercave.com/wp/wp2087757.jpg",
      "de-section": "https://w0.peakpx.com/wallpaper/803/1005/HD-wallpaper-las-vegas-raiders-american-football-team-black-stone-background-las-vegas-raiders-logo-grunge-art-nfl-american-football-usa-las-vegas-raiders-emblem.jpg"
    };

    const CSV_QB_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQv20vUSyozLzoZmyfQGHiPHx0JNlnZoZlGxa6K9ZjdCPhHdjWXb8ToDvebBaxRz3CJfWPjj0bI18Zy/pub?output=csv";
    const CSV_WR_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRpAk3lRX606aOmjB9zgpHaQzxlKc-stoJRD-1DW2UjkeDUIpgfvorq1qfedCsOEc9Zg_8Z6RxCJV9x/pub?output=csv";
    const CSV_DB_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ4EemaFNDP_y7-mnuKQdES6iAoNCAKpeWD0kbDsY_geFPbttzs0umb5Ja-Xg2fu8hpIE3uhP3fXdIO/pub?output=csv";
    const CSV_DE_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQuB1-17W9_4DvGrinp3ovMjspVwLlVm6sL44sQM1yZY-EttTSKCVfazjlnmaglwf_bN0Acq0XOmIw8/pub?output=csv";
    const sections = ["qb-section", "wr-section", "db-section", "de-section"];

    // Helper to update the background container with a new image via fade-out then fade-in.
    function updateBackground(newSectionId) {
      const bgContainer = document.getElementById("bg-container");
      bgContainer.style.opacity = 0;
      setTimeout(() => {
        bgContainer.style.backgroundImage = `url('${bgImages[newSectionId]}')`;
        bgContainer.style.opacity = 1;
      }, 500);
    }

    // Parallax-style scroll: as you scroll, adjust vertical position.
    window.addEventListener('scroll', () => {
      const scrollPos = window.scrollY;
      const factor = 0.3;
      const bgContainer = document.getElementById("bg-container");
      bgContainer.style.backgroundPosition = `center ${-scrollPos * factor}px`;
    });

    window.addEventListener('DOMContentLoaded', () => {
      fetchAndBuildList(CSV_QB_LINK, "qb-container");
      fetchAndBuildList(CSV_WR_LINK, "wr-container");
      fetchAndBuildList(CSV_DB_LINK, "db-container");
      fetchAndBuildList(CSV_DE_LINK, "de-container");
      let initialSection = document.getElementById("qb-section");
      initialSection.style.display = "block";
      initialSection.classList.add("fade-in-left");
      updateBackground("qb-section");
    });

    function switchSection(newSectionId) {
      updateBackground(newSectionId);
      sections.forEach(id => {
        let sectionEl = document.getElementById(id);
        if (id === newSectionId) {
          sectionEl.style.display = "block";
          sectionEl.classList.remove("fade-out-left");
          sectionEl.classList.add("fade-in-left");
        } else {
          if (sectionEl.style.display === "block") {
            sectionEl.classList.remove("fade-in-left");
            sectionEl.classList.add("fade-out-left");
            sectionEl.addEventListener("animationend", function handler() {
              sectionEl.style.display = "none";
              sectionEl.classList.remove("fade-out-left");
              sectionEl.removeEventListener("animationend", handler);
            });
          }
        }
      });
    }

    function fetchAndBuildList(csvLink, containerId) {
  fetch(csvLink)
    .then(response => response.text())
    .then(csvText => {
      const results = Papa.parse(csvText, { header: true, skipEmptyLines: true });
      const data = results.data;
      const fields = results.meta.fields;

      const container = document.getElementById(containerId);
      container.innerHTML = "";

      const headingRow = document.createElement("div");
      headingRow.classList.add("heading-row");
      headingRow.style.animation = "fadeInLeft 0.5s ease forwards";
      headingRow.style.animationDelay = "0s";

      const rankHeading = document.createElement("div");
      rankHeading.classList.add("heading-cell", "rank-cell");
      rankHeading.textContent = "Rank";
      headingRow.appendChild(rankHeading);

      fields.forEach(fieldName => {
        const cell = document.createElement("div");
        cell.classList.add("heading-cell");
        cell.textContent = fieldName;
        headingRow.appendChild(cell);
      });

      container.appendChild(headingRow);

      data.forEach((rowObj, index) => {
        const rowDiv = document.createElement("div");
        rowDiv.classList.add("player-row");
        rowDiv.style.animation = "fadeInLeft 0.5s ease forwards";
        rowDiv.style.animationDelay = ((index + 1) * 0.1) + "s";

        const rankDiv = document.createElement("div");
        rankDiv.classList.add("player-rank");
        rankDiv.textContent = index + 1;
        if (index === 0) {
          rankDiv.classList.add("top1");
        } else if (index === 1) {
          rankDiv.classList.add("top2");
        } else if (index === 2) {
          rankDiv.classList.add("top3");
        } else {
          rankDiv.classList.add("other");
        }
        rowDiv.appendChild(rankDiv);

        fields.forEach(fieldName => {
          const cellDiv = document.createElement("div");
          cellDiv.classList.add("player-cell");
          let rawValue = rowObj[fieldName] || "";

          // **Convert RATING to Star System**
          if (fieldName.toUpperCase() === "STARs") {
            const ratingValue = parseFloat(rawValue) || 0;
            let stars = "⭐"; // Default to 1 star

            if (ratingValue >= 90) stars = "⭐⭐⭐⭐⭐";
            else if (ratingValue >= 75) stars = "⭐⭐⭐⭐";
            else if (ratingValue >= 50) stars = "⭐⭐⭐";
            else if (ratingValue >= 25) stars = "⭐⭐";

            cellDiv.textContent = stars;
          } else {
            cellDiv.textContent = rawValue;
          }

          rowDiv.appendChild(cellDiv);
        });

        container.appendChild(rowDiv);
      });
    })
    .catch(err => console.error("Error fetching CSV:", err));
}
  </script>
</body>
</html>
