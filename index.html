<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Player Stats Page</title>
  <!-- IBM Plex Sans font -->
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Basic Reset & Body */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'IBM Plex Sans', sans-serif;
      background: #111; /* near-black background */
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }

    /* MAIN TITLE - simple black background */
    .main-title {
      background-color: #000;
      text-align: center;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .main-title h1 {
      font-size: 2rem;
      color: #fff;
    }

    /* NAV BAR */
    .nav-bar {
      background-color: rgba(128,128,128,0.4);
      padding: 1rem;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      margin-left: 10px;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }

    /************************************************
     * NEON BUTTON STYLES WITH CUSTOM COLORS
     * Forced 16:9 ratio (e.g., 200px width)
     * Text transitions to white on hover (including reflection)
     * Reduced glow intensity on hover
     ************************************************/
    .category-buttons {
      display: flex;
      gap: 1rem;
    }
    .category-buttons a {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      aspect-ratio: 16 / 9;
      width: 200px;
      padding: 0;
      text-decoration: none;
      text-transform: uppercase;
      transition: color 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
      letter-spacing: 4px;
      overflow: hidden;
      font-weight: bold;
      font-size: 1rem;
    }
    /* Default neon colors for each button */
    .category-buttons a.qb { color: #8A2BE2; } /* Purple */
    .category-buttons a.wr { color: #03e9f4; } /* Blue */
    .category-buttons a.db { color: #8B0000; } /* Dark red */
    .category-buttons a.de { color: #FFA500; } /* Orange */
    /* Hover effect: text transitions to white; glow reduced */
    .category-buttons a:hover {
      background: currentColor;
      color: #fff;
      box-shadow: 0 0 3px currentColor,
                  0 0 15px currentColor,
                  0 0 30px currentColor,
                  0 0 100px currentColor;
      -webkit-box-reflect: below 1px linear-gradient(transparent, #fff);
    }
    /* Animated Neon Borders using currentColor */
    .category-buttons a span {
      position: absolute;
      display: block;
    }
    .category-buttons a span:nth-child(1) {
      top: 0; left: 0;
      width: 100%; height: 2px;
      background: linear-gradient(90deg, transparent, currentColor);
      animation: animate1 1s linear infinite;
    }
    @keyframes animate1 {
      0% { left: -100%; }
      50%,100% { left: 100%; }
    }
    .category-buttons a span:nth-child(2) {
      top: -100%; right: 0;
      width: 2px; height: 100%;
      background: linear-gradient(180deg, transparent, currentColor);
      animation: animate2 1s linear infinite;
      animation-delay: 0.25s;
    }
    @keyframes animate2 {
      0% { top: -100%; }
      50%,100% { top: 100%; }
    }
    .category-buttons a span:nth-child(3) {
      bottom: 0; right: 0;
      width: 100%; height: 2px;
      background: linear-gradient(270deg, transparent, currentColor);
      animation: animate3 1s linear infinite;
      animation-delay: 0.5s;
    }
    @keyframes animate3 {
      0% { right: -100%; }
      50%,100% { right: 100%; }
    }
    .category-buttons a span:nth-child(4) {
      bottom: -100%; left: 0;
      width: 2px; height: 100%;
      background: linear-gradient(360deg, transparent, currentColor);
      animation: animate4 1s linear infinite;
      animation-delay: 0.75s;
    }
    @keyframes animate4 {
      0% { bottom: -100%; }
      50%,100% { bottom: 100%; }
    }

    /***********************************************
     * "VERTICAL LIST" LAYOUT
     ***********************************************/
    section {
      display: none;
      background-color: #222;
      margin: 1rem auto;
      padding: 1rem;
      border-radius: 4px;
      max-width: 90%;
    }
    section h2 {
      margin-bottom: 1rem;
      color: #fff;
    }

    /* Container for the heading row + the player rows */
    .list-container {
      display: flex;
      flex-direction: column;
      gap: 10px;  /* Using the original gap from your code */
    }

    /* A "heading row" with columns labeled */
    .heading-row {
      display: flex;
      background: #333;
      padding: 10px;
      border-radius: 5px;
      font-weight: bold;
    }
    .heading-cell {
      flex: 1;
      text-align: left;
      padding: 0 10px;
    }
    /* Rank heading narrower */
    .heading-cell.rank-cell {
      width: 60px;
      flex-shrink: 0;
    }

    /* Each player row is a flex container, "padded list" style */
    .player-row {
      display: flex;
      align-items: center;
      background: #2a2a2a;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.5);
      transition: color 0.3s ease, box-shadow 0.3s ease;
    }
    /* QB-specific styling: force 16:9 ratio, default light gray text with reflection,
       and on hover transition to white with a gentler glow. */
    #qb-container .player-row {
      aspect-ratio: 16 / 9;
      color: #ccc;
      -webkit-box-reflect: below 1px linear-gradient(transparent, rgba(204,204,204,0.5));
    }
    #qb-container .player-row:hover {
      color: #fff;
      -webkit-box-reflect: below 1px linear-gradient(transparent, #fff);
      box-shadow: 0 2px 4px rgba(255,255,255,0.15);
    }

    /* The rank cell for each row, with special borders for top 1/2/3 */
    .player-rank {
      width: 60px;
      flex-shrink: 0;
      text-align: center;
      font-weight: bold;
      margin-right: 10px;
      padding: 10px;
      border-radius: 5px;
      background: #000;
    }
    .top1 { border: 2px solid gold; }
    .top2 { border: 2px solid silver; }
    .top3 { border: 2px solid #cd7f32; }
    .other { border: 2px solid #444; }

    /* Each cell after rank */
    .player-cell {
      flex: 1;
      padding: 10px;
      background: #111;
      border-radius: 5px;
      margin-right: 5px;
    }
  </style>
  <!-- Papa Parse via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
</head>
<body>

  <!-- MAIN TITLE -->
  <div class="main-title">
    <h1>Raider TC Stats</h1>
  </div>

  <!-- NAV BAR with Neon Buttons -->
  <div class="nav-bar">
    <div class="category-buttons">
      <a href="#" onclick="showSection('qb-section')" class="qb">
        <span></span><span></span><span></span><span></span>
        QB
      </a>
      <a href="#" onclick="showSection('wr-section')" class="wr">
        <span></span><span></span><span></span><span></span>
        WR
      </a>
      <a href="#" onclick="showSection('db-section')" class="db">
        <span></span><span></span><span></span><span></span>
        DB
      </a>
      <a href="#" onclick="showSection('de-section')" class="de">
        <span></span><span></span><span></span><span></span>
        DE
      </a>
    </div>
  </div>

  <!-- QB SECTION -->
  <section id="qb-section">
    <h2>Quarterback Stats</h2>
    <div class="list-container" id="qb-container"></div>
  </section>

  <!-- WR SECTION -->
  <section id="wr-section">
    <h2>Wide Receiver Stats</h2>
    <div class="list-container" id="wr-container"></div>
  </section>

  <!-- DB SECTION -->
  <section id="db-section">
    <h2>Defensive Back Stats</h2>
    <div class="list-container" id="db-container"></div>
  </section>

  <!-- DE SECTION -->
  <section id="de-section">
    <h2>Defensive End Stats</h2>
    <div class="list-container" id="de-container"></div>
  </section>

  <script>
    /*******************************************************
     * REPLACE THESE WITH YOUR ACTUAL PUBLISHED CSV LINKS
     *******************************************************/
    const CSV_QB_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQv20vUSyozLzoZmyfQGHiPHx0JNlnZoZlGxa6K9ZjdCPhHdjWXb8ToDvebBaxRz3CJfWPjj0bI18Zy/pub?output=csv";
    const CSV_WR_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRpAk3lRX606aOmjB9zgpHaQzxlKc-stoJRD-1DW2UjkeDUIpgfvorq1qfedCsOEc9Zg_8Z6RxCJV9x/pub?output=csv";
    const CSV_DB_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ4EemaFNDP_y7-mnuKQdES6iAoNCAKpeWD0kbDsY_geFPbttzs0umb5Ja-Xg2fu8hpIE3uhP3fXdIO/pub?output=csv";
    const CSV_DE_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSODRpqky0PxX7b2epxF2a6GFy7FyEKk7onSn96X9FjHSZXv03nE9zxQC6s35AiM1q8W7d1zrowdurX/pub?output=csv";

    const sections = ["qb-section", "wr-section", "db-section", "de-section"];

    // On page load, build all "lists" & show QB by default
    window.addEventListener('DOMContentLoaded', () => {
      fetchAndBuildList(CSV_QB_LINK, "qb-container");
      fetchAndBuildList(CSV_WR_LINK, "wr-container");
      fetchAndBuildList(CSV_DB_LINK, "db-container");
      fetchAndBuildList(CSV_DE_LINK, "de-container");
      showSection("qb-section");
    });

    // showSection: Hides all sections, shows only the requested one
    function showSection(sectionId) {
      sections.forEach(id => {
        document.getElementById(id).style.display = (id === sectionId) ? "block" : "none";
      });
    }

    /**
     * fetchAndBuildList:
     *  - Builds a "heading row" with "Rank" + field names
     *  - Creates a "player-row" for each CSV row
     *  - For top 1/2/3, sets gold/silver/bronze border on the rank cell
     *  - Converts "RATING" to stars
     */
    function fetchAndBuildList(csvLink, containerId) {
      fetch(csvLink)
        .then(response => response.text())
        .then(csvText => {
          const results = Papa.parse(csvText, { header: true, skipEmptyLines: true });
          const data = results.data;           // array of row objects
          const fields = results.meta.fields;  // array of column headers

          const container = document.getElementById(containerId);
          container.innerHTML = "";

          // Create heading row
          const headingRow = document.createElement("div");
          headingRow.classList.add("heading-row");

          // Rank heading cell
          const rankHeading = document.createElement("div");
          rankHeading.classList.add("heading-cell", "rank-cell");
          rankHeading.textContent = "Rank";
          headingRow.appendChild(rankHeading);

          // Field heading cells
          fields.forEach(fieldName => {
            const cell = document.createElement("div");
            cell.classList.add("heading-cell");
            cell.textContent = fieldName;
            headingRow.appendChild(cell);
          });

          container.appendChild(headingRow);

          // Now create each player-row
          data.forEach((rowObj, index) => {
            const rowDiv = document.createElement("div");
            rowDiv.classList.add("player-row");

            // Rank cell
            const rankDiv = document.createElement("div");
            rankDiv.classList.add("player-rank");
            rankDiv.textContent = index + 1;

            // Border color for top 1/2/3
            if (index === 0) {
              rankDiv.classList.add("top1");
            } else if (index === 1) {
              rankDiv.classList.add("top2");
            } else if (index === 2) {
              rankDiv.classList.add("top3");
            } else {
              rankDiv.classList.add("other");
            }

            rowDiv.appendChild(rankDiv);

            // Each field cell
            fields.forEach(fieldName => {
              const cellDiv = document.createElement("div");
              cellDiv.classList.add("player-cell");
              const rawValue = rowObj[fieldName] || "";

              // Convert "RATING" to stars
              if (fieldName.toUpperCase() === "RATING") {
                const ratingValue = parseInt(rawValue, 10) || 0;
                cellDiv.textContent = "â­".repeat(ratingValue);
              } else {
                cellDiv.textContent = rawValue;
              }

              rowDiv.appendChild(cellDiv);
            });

            container.appendChild(rowDiv);
          });
        })
        .catch(err => console.error("Error fetching CSV:", err));
    }
  </script>

</body>
</html>
