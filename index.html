<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Player Stats Page</title>
  <!-- IBM Plex Sans font -->
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Basic Reset & Body */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'IBM Plex Sans', sans-serif;
      background: #111; /* near-black background */
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }

    /* MAIN TITLE - simple black background, no mouse gradient */
    .main-title {
      background-color: #000;
      text-align: center;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .main-title h1 {
      font-size: 2rem;
      color: #fff;
    }

    /* NAV BAR */
    .nav-bar {
      background-color: rgba(128,128,128,0.4);
      padding: 1rem;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      margin-left: 10px;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }

    /************************************************
     * NEON BUTTON STYLES (adapted from your snippet)
     ************************************************/
    .category-buttons {
      display: flex;
      gap: 1rem;
    }
    .category-buttons a {
      position: relative;
      display: inline-block;
      padding: 25px 30px;
      color: #03e9f4;
      text-decoration: none;
      text-transform: uppercase;
      transition: 0.5s;
      letter-spacing: 4px;
      overflow: hidden;
      font-weight: bold;
      font-size: 1rem;
    }
    .category-buttons a:hover {
      background: #03e9f4;
      color: #050801;
      box-shadow: 0 0 5px #03e9f4,
                  0 0 25px #03e9f4,
                  0 0 50px #03e9f4,
                  0 0 200px #03e9f4;
      -webkit-box-reflect: below 1px linear-gradient(transparent, #0005);
    }
    .category-buttons a span {
      position: absolute;
      display: block;
    }
    .category-buttons a span:nth-child(1) {
      top: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, #03e9f4);
      animation: animate1 1s linear infinite;
    }
    @keyframes animate1 {
      0%   { left: -100%; }
      50%,100% { left: 100%; }
    }
    .category-buttons a span:nth-child(2) {
      top: -100%;
      right: 0;
      width: 2px;
      height: 100%;
      background: linear-gradient(180deg, transparent, #03e9f4);
      animation: animate2 1s linear infinite;
      animation-delay: 0.25s;
    }
    @keyframes animate2 {
      0%   { top: -100%; }
      50%,100% { top: 100%; }
    }
    .category-buttons a span:nth-child(3) {
      bottom: 0;
      right: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(270deg, transparent, #03e9f4);
      animation: animate3 1s linear infinite;
      animation-delay: 0.5s;
    }
    @keyframes animate3 {
      0%   { right: -100%; }
      50%,100% { right: 100%; }
    }
    .category-buttons a span:nth-child(4) {
      bottom: -100%;
      left: 0;
      width: 2px;
      height: 100%;
      background: linear-gradient(360deg, transparent, #03e9f4);
      animation: animate4 1s linear infinite;
      animation-delay: 0.75s;
    }
    @keyframes animate4 {
      0%   { bottom: -100%; }
      50%,100% { bottom: 100%; }
    }

    /***********************************************
     * TABLES / COLUMNS
     ***********************************************/
    section {
      display: none;
      background-color: #222;
      margin: 1rem auto;
      padding: 1rem;
      border-radius: 4px;
      max-width: 90%;
    }
    section h2 {
      margin-bottom: 1rem;
      color: #fff;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      color: #fff;
    }
    thead tr {
      background-color: #333;
    }
    th, td {
      border: 1px solid #444;
      padding: 0.75rem 1rem;
      text-align: left;
    }
    th {
      font-weight: bold;
    }

    /* Player index cell styles by rank: gold, silver, bronze, or normal. */
    .top1 {
      border: 2px solid gold;
      background: #000;
    }
    .top2 {
      border: 2px solid silver;
      background: #000;
    }
    .top3 {
      border: 2px solid #cd7f32; /* Bronze */
      background: #000;
    }
    .other {
      border: 2px solid #444;
      background: #000;
    }
  </style>
  <!-- Papa Parse via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
</head>
<body>

  <!-- MAIN TITLE -->
  <div class="main-title">
    <h1>Raider TC Stats</h1>
  </div>

  <!-- NAVIGATION BAR with Neon Buttons -->
  <div class="nav-bar">
    <div class="category-buttons">
      <a href="#" onclick="showSection('qb-section')">
        <span></span><span></span><span></span><span></span>
        QB
      </a>
      <a href="#" onclick="showSection('wr-section')">
        <span></span><span></span><span></span><span></span>
        WR
      </a>
      <a href="#" onclick="showSection('db-section')">
        <span></span><span></span><span></span><span></span>
        DB
      </a>
      <a href="#" onclick="showSection('de-section')">
        <span></span><span></span><span></span><span></span>
        DE
      </a>
    </div>
  </div>

  <!-- QB SECTION -->
  <section id="qb-section">
    <h2>Quarterback Stats</h2>
    <table id="qb-table">
      <thead></thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- WR SECTION -->
  <section id="wr-section">
    <h2>Wide Receiver Stats</h2>
    <table id="wr-table">
      <thead></thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- DB SECTION -->
  <section id="db-section">
    <h2>Defensive Back Stats</h2>
    <table id="db-table">
      <thead></thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- DE SECTION -->
  <section id="de-section">
    <h2>Defensive End Stats</h2>
    <table id="de-table">
      <thead></thead>
      <tbody></tbody>
    </table>
  </section>

  <script>
    /*******************************************************
     * REPLACE THESE WITH YOUR ACTUAL PUBLISHED CSV LINKS
     *******************************************************/
    const CSV_QB_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQv20vUSyozLzoZmyfQGHiPHx0JNlnZoZlGxa6K9ZjdCPhHdjWXb8ToDvebBaxRz3CJfWPjj0bI18Zy/pub?output=csv";
    const CSV_WR_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRpAk3lRX606aOmjB9zgpHaQzxlKc-stoJRD-1DW2UjkeDUIpgfvorq1qfedCsOEc9Zg_8Z6RxCJV9x/pub?output=csv";
    const CSV_DB_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ4EemaFNDP_y7-mnuKQdES6iAoNCAKpeWD0kbDsY_geFPbttzs0umb5Ja-Xg2fu8hpIE3uhP3fXdIO/pub?output=csv";
    const CSV_DE_LINK = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSODRpqky0PxX7b2epxF2a6GFy7FyEKk7onSn96X9FjHSZXv03nE9zxQC6s35AiM1q8W7d1zrowdurX/pub?output=csv";

    const sections = ["qb-section", "wr-section", "db-section", "de-section"];

    // On page load, build all tables & show QB by default
    window.addEventListener('DOMContentLoaded', () => {
      fetchAndBuildTable(CSV_QB_LINK, "qb-table");
      fetchAndBuildTable(CSV_WR_LINK, "wr-table");
      fetchAndBuildTable(CSV_DB_LINK, "db-table");
      fetchAndBuildTable(CSV_DE_LINK, "de-table");
      showSection("qb-section");
    });

    // showSection: Hides all sections, shows only the requested one
    function showSection(sectionId) {
      sections.forEach(id => {
        document.getElementById(id).style.display = (id === sectionId) ? "block" : "none";
      });
    }

    /**
     * fetchAndBuildTable:
     *  - Builds column headers from CSV
     *  - Adds "Rank" column
     *  - Converts "RATING" to stars
     *  - Styles top 1/2/3 index cells with gold/silver/bronze
     */
    function fetchAndBuildTable(csvLink, tableId) {
      fetch(csvLink)
        .then(response => response.text())
        .then(csvText => {
          const results = Papa.parse(csvText, { header: true, skipEmptyLines: true });
          const data = results.data;           // array of row objects
          const fields = results.meta.fields;  // array of column headers

          const table = document.getElementById(tableId);
          const thead = table.querySelector("thead");
          const tbody = table.querySelector("tbody");

          // Clear any existing content
          thead.innerHTML = "";
          tbody.innerHTML = "";

          // Build header row (including "Rank" column)
          const headerRow = document.createElement("tr");
          const rankTh = document.createElement("th");
          rankTh.textContent = "Rank";
          headerRow.appendChild(rankTh);
          fields.forEach(fieldName => {
            const th = document.createElement("th");
            th.textContent = fieldName;
            headerRow.appendChild(th);
          });
          thead.appendChild(headerRow);

          // Build data rows
          data.forEach((rowObj, index) => {
            const tr = document.createElement("tr");

            // Rank cell
            const rankTd = document.createElement("td");
            rankTd.textContent = index + 1;

            // Apply top1/top2/top3/other classes for border color
            if (index === 0) {
              rankTd.classList.add("top1");
            } else if (index === 1) {
              rankTd.classList.add("top2");
            } else if (index === 2) {
              rankTd.classList.add("top3");
            } else {
              rankTd.classList.add("other");
            }
            tr.appendChild(rankTd);

            // Add cells for each CSV field
            fields.forEach(fieldName => {
              const td = document.createElement("td");
              const rawValue = rowObj[fieldName] || "";

              // Convert "RATING" to stars
              if (fieldName.toUpperCase() === "RATING") {
                const ratingValue = parseInt(rawValue, 10) || 0;
                td.textContent = "â­".repeat(ratingValue);
              } else {
                td.textContent = rawValue;
              }
              tr.appendChild(td);
            });

            tbody.appendChild(tr);
          });
        })
        .catch(err => console.error("Error fetching CSV:", err));
    }
  </script>

</body>
</html>
